<!DOCTYPE html>
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:p="http://primefaces.org/ui"
    >


    <ui:composition template="Layout.xhtml">
        <ui:define name="head">

        </ui:define>

        <ui:define name="body">
            <h:form>
                <p:growl id="messages" />

                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton id="novoCommandButton" value="Novo" actionListener="#{controller.novo()}"
                                         update="@form" icon="fa fa-plus" 
                                         />

                        <p:commandButton id="limparCommandButton" value="Limpar" actionListener="#{controller.limpar}"
                                         rendered="#{controller.estadoAtual ne 'EDICAO'}"
                                         update="@form" icon="fa fa-circle-o" 
                                         />

                        <p:commandButton id="pesquisarCommandButton" value="Pesquisar" actionListener="#{controller.pesquisar()}"
                                         rendered="#{controller.estadoAtual eq 'PESQUISA'}"
                                         update="@form"  icon="fa fa-search" 
                                         />	            	

                        <p:commandButton id="salvarCommandButton" value="Salvar" actionListener="#{controller.salvar()}"
                                         rendered="#{controller.estadoAtual eq 'INSERCAO' or controller.estadoAtual eq 'EDICAO'}"
                                         update="@form"  icon="fa fa-save" 
                                         />

                        <p:commandButton id="removerCommandButton" value="Remover" actionListener="#{controller.remover}"
                                         rendered="#{controller.estadoAtual eq 'INSERCAO' or controller.estadoAtual eq 'EDICAO'}"
                                         update="@form" icon="fa fa-remove" 
                                         />
                    </f:facet>		 
                </p:toolbar>

                <p:defaultCommand target="#{controller.acaoAtual}" />		    

                <p:spacer height="10px" />

                <p:fieldset legend="Autor">
                    <p:panelGrid columns="6" style="width:100%" columnClasses="width200" >
                        <p:outputLabel value="CPF:" />
                        <h:panelGroup>
                            <p:inputText value="#{controller.CPFValor}" 
                                         rendered="#{controller.estadoAtual eq 'PESQUISA'}"
                                         />

                            <h:inputText value="#{controller.registro.cpf}" 
                                         rendered="#{controller.estadoAtual eq 'INSERCAO'}"
                                         />

                            <h:outputText value="#{controller.registro.cpf}"
                                          rendered="#{controller.estadoAtual eq 'EDICAO'}"
                                          />

                        </h:panelGroup>

                        <p:outputLabel value="Nome:" />
                        <p:inputText value="#{controller.registro.nome}" />

                        <p:outputLabel value="Email:" 
                                       rendered="#{controller.estadoAtual ne 'PESQUISA'}"
                                       />
                        <p:inputText value="#{controller.registro.email}" 
                                     rendered="#{controller.estadoAtual ne 'PESQUISA'}"
                                     />					
                    </p:panelGrid>
                </p:fieldset>

                <p:spacer height="10px" />

                <p:dataTable var="registro" value="#{controller.lista}"
                             rendered="#{controller.estadoAtual eq 'PESQUISA'}"
                             >
                    <p:column headerText="#">
                        <p:commandButton actionListener="#{controller.editar(registro)}" 
                                         update="@form" icon="fa fa-edit" 
                                         />
                    </p:column>

                    <p:column headerText="CPF">
                        <h:outputText value="#{registro.cpf.formatado()}" />
                    </p:column>

                    <p:column headerText="Nome">
                        <h:outputText value="#{registro.nome}" />
                    </p:column>
                    <p:column headerText="Email">
                        <h:outputText value="#{registro.email}" />
                    </p:column>
                </p:dataTable>
            </h:form>			
        </ui:define>
    </ui:composition>
</html>